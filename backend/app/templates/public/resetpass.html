{% extends "public/templates/public_template.html" %}

{% block title %}Reset Password{% endblock %}

{% block main %}

<script type="text/javascript">
    function confirm() {
        var password = document.getElementById("password").value;
        if(password == "") {
            alert("Please enter a value for your new password");
            return;
        }
        
        if (!(password.match(/[A-Z]/g) && 
            password.match(/[!@#$%^&*]/g) &&
            password.match(/[0-9]/g) && 
            password.length >= 8)) {
            alert("Your password must have 1 uppercase character, 1 special character (!@#$%^&*), 1 digit, and be at least 8 characters long");
            return;
        }

        document.getElementById("resetform").submit();
    }

    function togglePassword() {
        var $pwd = $("#password")
        if($pwd.attr('type') === 'password') {
            $pwd.attr('type', 'text');
        } else {
            $pwd.attr('type', 'password');
        }
    }
</script>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
 <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>

<div class="form-gap"></div>
<div class="container">
	<div class="row">
		<div class="col-md-4 col-md-offset-4">
            <div class="panel panel-default">
              <div class="panel-body">
                <div class="text-center">
                  <h3><i class="fa fa-lock fa-4x"></i></h3>
                  <h2 class="text-center">Reset Password</h2>
                  <p>You can reset your password here.</p>
                  <div class="panel-body">
    
                    <form id="resetform" action="/api/v1.2/managements/users/thankyou" class="form" method="post">
                      <div class="form-group">
                        <div class="input-group">
                          <span class="input-group-addon" onclick="togglePassword()"><i class="glyphicon glyphicon-eye-open"></i></span>
                          <input id="password" name="password" placeholder="new password" class="form-control" type="password">
                        </div>
                      </div>
                      <div class="form-group">
                        <input name="recover-submit" onclick="confirm()" class="btn btn-lg btn-primary btn-block" value="Reset Password" type="button">
                      </div>
                      <input type="hidden" class="hide" name="code" id="code" value="{{ code }}">                      
                      <input type="hidden" class="hide" name="pagePost" id="pagePost" value="reset"> 
                    </form>
    
                    <div class="alert alert-warning password-alert" role="alert">
                      <ul>
                        <li class="requirements leng"><i class="fas fa-check green-text"></i><i class="fas fa-times red-text"></i> Your password must have at least 8 chars.</li>
                        <li class="requirements big-letter"><i class="fas fa-check green-text"></i><i class="fas fa-times red-text"></i> Your password must have at least 1 big letter.</li>
                        <li class="requirements num"><i class="fas fa-check green-text"></i><i class="fas fa-times red-text"></i> Your password must have at least 1 number.</li>
                        <li class="requirements special-char"><i class="fas fa-check green-text"></i><i class="fas fa-times red-text"></i> Your password must have at least 1 special char.</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
	</div>
</div>
<script type="text/javascript" src="/static/js/password.js"></script>
{% endblock %}

