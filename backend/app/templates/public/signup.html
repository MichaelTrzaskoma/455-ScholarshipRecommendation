{% extends "public/templates/public_template.html" %}

{% block title %}Sign Up{% endblock %}

{% block main %}
 <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
 <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script type="text/javascript">
    function confirm() {
        var email = document.getElementById("inputEmail").value.trim().toLowerCase();
        var password = document.getElementById("inputPassword").value;
        if(email == "" || password == "") {
            alert("Please enter a value for email and password");
            return;
        }
        
        var mailformat = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
        
        if(!email.match(mailformat)) {
            alert("You have entered an invalid email address!");
            return;
        }

        if (!(password.match(/[a-z]/g) && 
            password.match(/[A-Z]/g) && 
            password.match(/[0-9]/g) && 
            password.length >= 8)) {
            alert("Your password must have 1 uppercase character, 1 lowercase character, 1 digit, and be at least 8 characters long");
            return;
        }

        document.getElementById("signupform").submit();
    }

    function togglePassword() {
        var $pwd = $(".pwd")
        if($pwd.attr('type') === 'password') {
            $pwd.attr('type', 'text');
        } else {
            $pwd.attr('type', 'password');
        }
        console.log("Hello")
    }
</script>
<div class="container mt-3">
  <div class="row">
    <div class="col">
      <img class="rounded mx-auto d-block" height="150px" width="150px" src="/static/img/AppLogo.png" />
      <br>
      <h3 class="text-center" style="letter-spacing: 1px">Sign Up</h3>
      <br>
      <form action="/thankyou" method="post" id="signupform">
        <div class="mb-3 row">
            <label for="staticEmail" class="col-sm-2 col-form-label">Email</label>
            <div class="col-sm-10">
                <input type="email" class="form-control" name="inputEmail" id="inputEmail">
            </div>
        </div>

        <div class="mb-3 row">
        <label for="staticPassword" class="col-sm-2 col-form-label">Password</label>
        <div class="col-sm-10">
          <input type="password" class="form-control pwd" name="inputPassword" id="inputPassword">
            <button class="btn btn-default reveal" onClick="togglePassword()" type="button"><i class="glyphicon glyphicon-eye-open"></i></button>
        </div>
      </div>
         <div class="col-md-5">

        <div class="alert alert-warning password-alert" role="alert">
          <ul>
            <li class="requirements leng"><i class="fas fa-check green-text"></i><i class="fas fa-times red-text"></i> Your password must have at least 8 chars.</li>
            <li class="requirements big-letter"><i class="fas fa-check green-text"></i><i class="fas fa-times red-text"></i> Your password must have at least 1 big letter.</li>
            <li class="requirements num"><i class="fas fa-check green-text"></i><i class="fas fa-times red-text"></i> Your password must have at least 1 number.</li>
            <li class="requirements special-char"><i class="fas fa-check green-text"></i><i class="fas fa-times red-text"></i> Your password must have at least 1 special char.</li>
          </ul>
        </div>

      </div>
        <div class="mb-3 row">
            {% if request.args.error == "dup" %}
                <p class="error">An account is already associated with that email. Please sign up with a different email or
                sign in on the app</p>
            {% endif %}
        </div>
        <div class="mb-3 row">
            <input class ="btn btn-primary" onclick="confirm()" type="button" value="Register">
        </div>
        <input name="pagePost" id="pagePost" value="signup" class="hide">
      </form>
    </div>
  </div>
</div>

<script type="text/javascript" src="/static/js/password.js"></script>
{% endblock %}

